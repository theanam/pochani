function turnOnVideo(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,navigator.getUserMedia({video:!0,audio:!1},function(e){videoPlaying=!0,theStream=e;var o=window.URL.createObjectURL(e);v.style.display="block",v.src=o,v.play()},function(e){console.log(e)})}function turnOffVideo(){theStream.stop&&(theStream.stop(),thestream=null),v.style.display="none",v.pause(),v.src="",videoPlaying=!1}function toggleAnnotation(){$(".colors").toggleClass("hiddencolor"),$(".annotate").toggle()}function resizeAnnotate(){$(".annotate").attr({width:$(window).width(),height:$(window).height()}),ctx.lineWidth=3,ctx.lineCap="round",ctx.strokeStyle=strokeColor}function drawingStart(e){e.preventDefault(),mouseDown=!0,previousX=e.offsetX,previousY=e.offsetY}function drawingEnd(e){e.preventDefault(),mouseDown=!1}function drawingProgress(e){e.preventDefault(),mouseDown&&(ctx.beginPath(),ctx.moveTo(previousX,previousY),ctx.lineTo(e.offsetX,e.offsetY),ctx.stroke(),previousX=e.offsetX,previousY=e.offsetY)}$(".slide").pochaSlider({autoPlay:!1,keyboardNavigation:!0}),$(".slidecontainer").show(),$(".pin").on("click",function(){$(".toolbox-inner").toggleClass("hide"),$(this).toggleClass("pinned")});var videoPlaying=!1;$(".annotation").on("click",function(){toggleAnnotation()}),$(".colors").on("click",".button",function(){ctx.strokeStyle=this.style.backgroundColor,$(".colors .button").removeClass("selected"),$(this).addClass("selected"),strokeColor=this.style.backgroundColor});var theStream=null,v=$(".webcam").get(0);$(".video").on("click",function(){videoPlaying?turnOffVideo():turnOnVideo()});var strokeColor="#2c3e50",mouseDown=!1,previousX=0,previousY=0,canvas=$(".annotate"),ctx=$(".annotate").get(0).getContext("2d");resizeAnnotate(),$(document).on("keydown",function(e){(32==e.keyCode||37==e.keyCode||39==e.keyCode)&&(resizeAnnotate(),$(".colors").removeClass("hiddencolor"),$(".annotate").hide())}),$(window).on("resize",resizeAnnotate),canvas.on("mousedown",drawingStart),canvas.on("mouseup",drawingEnd),canvas.on("mouseleave",drawingEnd),canvas.on("mousemove",drawingProgress);